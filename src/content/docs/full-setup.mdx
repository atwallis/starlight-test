---
title: Getting Started
description: Get started with Restura
---

import { Aside, Code, TabItem, Tabs } from '@astrojs/starlight/components';


## Prerequisites
- [Node.js](https://nodejs.org/) 18+
- [Express](https://expressjs.com/) 5+
- [PostgreSQL](https://www.postgresql.org/) database (or follow the instructions below to setup a local one)
- [Docker Compose](https://docs.docker.com/compose/) (if setting up a local PostgreSQL database)

## Create an Express application

### Create a new project
If you don't already have an Express application, you can create one by following running the following commands in your terminal:

export const setupProjectNpmCode = `mkdir restura-demo
cd restura-demo
npm init
npm install express`;

export const setupProjectPnpmCode = `mkdir restura-demo
cd restura-demo
pnpm init
pnpm add express`;

export const setupProjectYarnCode = `mkdir restura-demo
cd restura-demo
yarn init
yarn add express`;

export const setupProjectBunCode = `mkdir restura-demo
cd restura-demo
bun init
bun add express`;

<Tabs>
  <TabItem label="npm">
    <Code code={setupProjectNpmCode} lang="bash"/>
  </TabItem>
  <TabItem label="pnpm">
    <Code code={setupProjectPnpmCode} lang="bash"/>
  </TabItem>
  <TabItem label="yarn">
    <Code code={setupProjectYarnCode} lang="bash"/>
  </TabItem>
  <TabItem label="bun">
    <Code code={setupProjectBunCode} lang="bash"/>
  </TabItem>
</Tabs>

### Install TypeScript if desired

If you want to use TypeScript, you can install it by running the following commands:

export const installTypescriptNpmCode = `
npm install -D typescript
npx tsc --init`;
export const installTypescriptPnpmCode = `
pnpm add -D typescript
pnpx tsc --init`;
export const installTypescriptYarnCode = `
yarn add -D typescript
yarn tsc --init`;

<Tabs>
  <TabItem label="npm">
    <Code code={installTypescriptNpmCode} lang="bash"/>
  </TabItem>
  <TabItem label="pnpm">
    <Code code={installTypescriptPnpmCode} lang="bash"/>
  </TabItem>
  <TabItem label="yarn">
    <Code code={installTypescriptYarnCode} lang="bash"/>
  </TabItem>
</Tabs>

This will create a `tsconfig.json` file in the root of your project.

<Aside type="note">
Bun already includes TypeScript, so you don't need to install it.
</Aside>

### Add an entry file

Create a new file called `server.ts`or `server.js` in the root of your project.

export const touchServerTypescriptCode = `touch server.ts`;

export const touchServerJavascriptCode = `touch server.js`;

<Tabs>
  <TabItem label="TypeScript">
    <Code code={touchServerTypescriptCode} lang="bash"/>
  </TabItem>
  <TabItem label="JavaScript">
    <Code code={touchServerJavascriptCode} lang="bash"/>
  </TabItem>
</Tabs>


### Add a script to run your application

Create a script for running your application by adding the following to your `package.json` file:

export const packageJsonJavascriptCode = `
{
  "scripts": {
    "start": "node server.js"
  }
}
`;

export const packageJsonTypescriptCode = `
{
  "scripts": {
    "start": "node server.ts"
  }
}
`;

<Tabs>
  <TabItem label="TypeScript">
    <Code code={packageJsonTypescriptCode} lang="json" title="package.json"/>
  </TabItem>
  <TabItem label="JavaScript">
    <Code code={packageJsonJavascriptCode} lang="json" title="package.json"/>
  </TabItem>
</Tabs>


Alternatively, you can follow the tutorial at: https://expressjs.com/en/starter/installing.html

## Installation

Start by installing the Restura Engine from the Restura Core package. Run the following command in your terminal:

<Tabs>
  <TabItem label="npm">
    <Code code="npm install @restura/core" lang="bash"/>
  </TabItem>
  <TabItem label="pnpm">
    <Code code="pnpm add @restura/core" lang="bash"/>
  </TabItem>
  <TabItem label="yarn">
    <Code code="yarn add @restura/core" lang="bash"/>
  </TabItem>
  <TabItem label="bun">
    <Code code="bun add @restura/core" lang="bash"/>
  </TabItem>
</Tabs>

## Add Restura to your Express application

In your entry file, add the following code to initialize the Restura Engine:

export const expressTypescriptCode = `
import { PsqlPool, restura, type OnValidAuthenticationCallback, type RsRequest, type RsResponse } from '@restura/core';
import express from 'express';

const app = express();

// Create a PostgreSQL connection pool
const pool = new PsqlPool({
  host: "<host>", // Replace with your database host
  port: "<port>", // Replace with your database port
  user: "postgres", // Replace with your database user
  password: "<password>", // Replace with your database password
  database: "<database>", // Replace with your database name
});

// Define an authentication handler
const authHandler = async (req: RsRequest<unknown>, res: RsResponse<unknown>, onValid: OnValidAuthenticationCallback) => {
  onValid({ role: 'user', scopes: [] });
};

// Initialize Restura
await restura.init(app, authHandler, pool);

app.listen(3001, () => { // This is the default port for the Restura Engine
  console.log('Server is running on port 3001');
});
`;

export const expressJavascriptCode = `
const { PsqlPool, restura } = require('@restura/core');
const express = require('express');

const app = express();

// Create a PostgreSQL connection pool
const pool = new PsqlPool({
  host: "postgres", // Replace with your database host
  port: "5432", // Replace with your database port
  user: "postgres", // Replace with your database user
  password: "postgres", // Replace with your database password
  database: "restura", // Replace with your database name
});

// Define an authentication handler
const authHandler = async (req, res, onValid) => {
  onValid({ role: 'user', scopes: [] });
};

// Initialize Restura
(async () => {
  await restura.init(app, authHandler, pool);

  app.listen(3001, () => { // This is the default port for the Restura Engine
    console.log('Server is running on port 3001');
  });
})();
`;

<Tabs>
  <TabItem label="TypeScript">
<Code code={expressTypescriptCode} lang="typescript" title="server.ts"/>
  </TabItem>
  <TabItem label="JavaScript">
    <Code code={expressJavascriptCode} lang="javascript" title="server.js"/>
  </TabItem>
</Tabs>

We setup a [basic ExpressJS application](https://expressjs.com/en/starter/hello-world.html) and then call `restura.init` to attach the Restura Engine to the Express application.

<Aside type="note">
Please replace the PsqlPool configuration with your actual database credentials, unless you want to follow the local PostgreSQL database setup below.
</Aside>

### Local PostgreSQL database

If you don't already have a PostgreSQL database, you can setup a local PostgreSQL database by creating a `docker-compose.yml` file with the following content:

export const dockerComposeCode = `
services:
  postgres:
    image: postgres:16
    ports:
      - 5432:5432
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: restura
`;

<Code code={dockerComposeCode} lang="yaml" title="docker-compose.yml"/>

export const dockerComposeUpCode = `
docker compose up -d
`;

Then run the following command to start the local PostgreSQL database:

<Code code={dockerComposeUpCode} lang="bash"/>

## Populate your database with a sample schema

Create a `schema.sql` file with the following content:

export const schemaSqlCode = `
CREATE TABLE public."user" (
    id           bigserial PRIMARY KEY,
    "createdOn"  timestamptz NOT NULL DEFAULT now(),
    "modifiedOn" timestamptz NOT NULL DEFAULT now(),
    "firstName"  varchar(150) NOT NULL,
    "lastName"   varchar(150) NOT NULL,
    email        varchar(255) NOT NULL,
    role         text NOT NULL
        CONSTRAINT user_role_check
            CHECK (role = ANY (ARRAY['ADMIN', 'USER']))
);

CREATE UNIQUE INDEX user_email_unique_index
    ON public."user" (email);

INSERT INTO public."user" (
    "firstName",
    "lastName",
    email,
    role
) VALUES (
    'System',
    'User',
    'system@localhost',
    'ADMIN'
);
`;

<Code code={schemaSqlCode} lang="sql" title="schema.sql"/>

export const sampleSchemaCode = `
docker compose exec -T postgres psql -U postgres -d restura < ./schema.sql
`;

Populate your database with a sample schema by running the following command in your terminal:

<Code code={sampleSchemaCode} lang="bash"/>

## Make a Restura Configuration file

Create a `restura.config.mjs` file with the following content:

export const resturaConfigCode = `
export default {
    logger: {
        level: "info" // Default log level is info
    },
    restura: {
       authToken: "12345" // This is the auth token used by the Restura UI to access your server
    }
}
`;

<Code code={resturaConfigCode} lang="javascript" title="restura.config.mjs"/>

## Create a Restura Schema file

Create a `restura.schema.json` file with the following content:

export const resturaSchemaCode = `
{
	"customTypes": [],
	"database": [
		{
			"checkConstraints": [],
			"columns": [
				{
					"hasAutoIncrement": true,
					"isNullable": false,
					"isPrimary": true,
					"name": "id",
					"roles": [],
					"scopes": [],
					"type": "BIGSERIAL"
				},
				{
					"default": "now()",
					"isNullable": false,
					"name": "createdOn",
					"roles": [],
					"scopes": [],
					"type": "DATETIME"
				},
				{
					"default": "now()",
					"isNullable": false,
					"name": "modifiedOn",
					"roles": [],
					"scopes": [],
					"type": "DATETIME"
				},
				{
					"isNullable": false,
					"length": 150,
					"name": "firstName",
					"roles": [],
					"scopes": [],
					"type": "VARCHAR"
				},
				{
					"isNullable": false,
					"length": 150,
					"name": "lastName",
					"roles": [],
					"scopes": [],
					"type": "VARCHAR"
				},
				{ "isNullable": false, "length": 255, "name": "email", "roles": [], "scopes": [], "type": "VARCHAR" },
				{
					"isNullable": false,
					"name": "role",
					"roles": [],
					"scopes": [],
					"type": "ENUM",
					"value": "'ADMIN','USER'"
				}
			],
			"foreignKeys": [],
			"indexes": [
				{
					"columns": ["email"],
					"isPrimaryKey": false,
					"isUnique": true,
					"name": "user_email_unique_index",
					"order": "ASC"
				}
			],
			"name": "user",
			"roles": [],
			"scopes": []
		}
	],
	"endpoints": [
		{
			"baseUrl": "/api/v1",
			"description": "V1 Endpoints",
			"name": "V1",
			"routes": [
				{
					"assignments": [],
					"description": "Gets all users",
					"joins": [],
					"method": "GET",
					"name": "Get Users",
					"path": "/user/list",
					"request": [],
					"response": [
						{ "name": "id", "selector": "user.id" },
						{ "name": "createdOn", "selector": "user.createdOn" },
						{ "name": "modifiedOn", "selector": "user.modifiedOn" },
						{ "name": "firstName", "selector": "user.firstName" },
						{ "name": "lastName", "selector": "user.lastName" },
						{ "name": "email", "selector": "user.email" },
						{ "name": "role", "selector": "user.role" }
					],
					"roles": ["user", "admin"],
					"scopes": [],
					"table": "user",
					"type": "ARRAY",
					"where": []
				}
			]
		}
	],
	"globalParams": ["userId"],
	"roles": ["anonymous", "user", "admin"],
	"scopes": ["read:user", "write:user", "read:admin", "write:admin"]
}
`;

<Code code={resturaSchemaCode} lang="json" title="restura.schema.json"/>

## Run the Restura Engine

Now that you have installed and added the required files, you can run the Restura Engine by starting your application.

<Tabs>
  <TabItem label="npm">
    <Code code="npm start" lang="bash"/>
  </TabItem>
  <TabItem label="pnpm">
    <Code code="pnpm start" lang="bash"/>
  </TabItem>
  <TabItem label="yarn">
    <Code code="yarn start" lang="bash"/>
  </TabItem>
  <TabItem label="bun">
    <Code code="bun start" lang="bash"/>
  </TabItem>
</Tabs>

When the Engine starts, it will generate a `src/@types` folder with the following files:
- `api.d.ts` - generated API endpoints types
- `model.d.ts`- generated Restura database table types
- `restura.d.ts` - generated types used by Restura

## Query the `user/list` Endpoint

The Restura schema has a `/user/list` endpoint that will return a list of users.

With the Restura Engine running, you can query the `/user/list` endpoint by running the following command in your terminal:

<Code code="curl -X GET http://localhost:3001/api/v1/user/list" lang="bash"/>

You will receive a JSON response with the list of users.

## Next Steps
- [Run the Visual Editor](../visual-editor)
- [Create a new database table](../guides/database-table)
- [Create a standard endpoint](../guides/standard-endpoint)
- [Create a custom endpoint](../guides/custom-endpoint)