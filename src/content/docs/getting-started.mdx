---
title: Getting Started
description: Get started with Restura
---

import { Aside, Code, TabItem, Tabs } from '@astrojs/starlight/components';


## Requirements
- Node.js 18+
- Express 5+
- A PostgreSQL database (or follow the instructions below to setup a local one)
- Docker (if setting up a local PostgreSQL database)
- Docker Compose (if setting up a local PostgreSQL database)

This tutorial assumes you have a basic understanding of [Node.js](https://nodejs.org/) and [Express](https://expressjs.com/).

## Installation

We'll start by installing the Restura core package. Run one of the following commands in your terminal:

<Tabs>
  <TabItem label="npm">
    <Code code="npm install @restura/core" lang="bash"/>
  </TabItem>
  <TabItem label="pnpm">
    <Code code="pnpm add @restura/core" lang="bash"/>
  </TabItem>
  <TabItem label="yarn">
    <Code code="yarn add @restura/core" lang="bash"/>
  </TabItem>
  <TabItem label="bun">
    <Code code="bun add @restura/core" lang="bash"/>
  </TabItem>
</Tabs>

## Add Restura to your Express application

Add Restura to your ExpressJS application by adding the following code to your application's entry file:

export const expressTypescriptCode = `
import { PsqlPool, restura, type OnValidAuthenticationCallback, type RsRequest, type RsResponse } from '@restura/core';
import express from 'express';

const app = express();

// Create a PostgreSQL connection pool
const pool = new PsqlPool({
  host: "postgres", // Replace with your database host
  port: "5432", // Replace with your database port
  user: "postgres", // Replace with your database user
  password: "postgres", // Replace with your database password
  database: "restura", // Replace with your database name
});

// Define an authentication handler
const authHandler = async (req: RsRequest<unknown>, res: RsResponse<unknown>, onValid: OnValidAuthenticationCallback) => {
  onValid({ role: 'user', scopes: [] });
};

// Initialize Restura
await restura.init(app, authHandler, pool);

app.listen(3001, () => { // This is the default port for the Restura Engine
  console.log('Server is running on port 3001');
});
`;

export const expressJavascriptCode = `
const { PsqlPool, restura } = require('@restura/core');
const express = require('express');

const app = express();

// Create a PostgreSQL connection pool
const pool = new PsqlPool({
  host: "postgres", // Replace with your database host
  port: "5432", // Replace with your database port
  user: "postgres", // Replace with your database user
  password: "postgres", // Replace with your database password
  database: "restura", // Replace with your database name
});

// Define an authentication handler
const authHandler = async (req, res, onValid) => {
  onValid({ role: 'user', scopes: [] });
};

// Initialize Restura
(async () => {
  await restura.init(app, authHandler, pool);

  app.listen(3001, () => { // This is the default port for the Restura Engine
    console.log('Server is running on port 3001');
  });
})();
`;

<Tabs>
  <TabItem label="TypeScript">
<Code code={expressTypescriptCode} lang="typescript" title="server.ts"/>
  </TabItem>
  <TabItem label="JavaScript">
    <Code code={expressJavascriptCode} lang="javascript" title="server.js"/>
  </TabItem>
</Tabs>

Replace the PsqlPool configuration with your actual database credentials, unless you are want to use the local PostgreSQL database setup below.

### Local PostgreSQL database

If you don't already have a PostgreSQL database, you can setup a local PostgreSQL database by creating a `docker-compose.yml` file with the following content:

export const dockerComposeCode = `
services:
  postgres:
    image: postgres:16
    ports:
      - 5432:5432
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: restura
`;

<Code code={dockerComposeCode} lang="yaml" title="docker-compose.yml"/>

export const dockerComposeUpCode = `
docker compose up -d
`;

Then run the following command to start the local PostgreSQL database:

<Code code={dockerComposeUpCode} lang="bash"/>

## Populate your database with a sample schema

Create a `schema.sql` file with the following content:

export const schemaSqlCode = `
CREATE TABLE users (
create table public."user"
(
    id           bigserial
        primary key,
    "createdOn"  timestamp with time zone default now() not null,
    "modifiedOn" timestamp with time zone default now() not null,
    "firstName"  varchar(150)                           not null,
    "lastName"   varchar(150)                           not null,
    email        varchar(255)                           not null,
    role         text                                   not null
        constraint user_role_check
            check (role = ANY (ARRAY ['ADMIN'::text, 'USER'::text]))
);

create unique index user_email_unique_index
    on public."user" (email);
);


INSERT INTO public."user" (
    "firstName",
    "lastName",
    email,
    role
) VALUES (
    'Restura',
    'Test',
    'test@restura.com',
    'ADMIN'
);

`;

<Code code={schemaSqlCode} lang="sql" title="schema.sql"/>

export const sampleSchemaCode = `
docker compose exec -T postgres psql -U postgres -d restura < ./schema.sql
`;

Populate your database with a sample schema by running the following command in your terminal:

<Code code={sampleSchemaCode} lang="bash"/>

## Make a Restura Configuration file

Create a `restura.config.mjs` file with the following content:

export const resturaConfigCode = `
export default {
    logger: {
        level: "info" // Default log level is info
    },
    restura: {
       authToken: "12345" // This is the auth token used by the Restura UI to access your server
    }
}
`;

<Code code={resturaConfigCode} lang="javascript" title="restura.config.mjs"/>

## Create a Restura Schema file

Create a `restura.schema.json` file with the following content:

export const resturaSchemaCode = `
{
	"customTypes": [],
	"database": [
		{
			"checkConstraints": [],
			"columns": [
				{
					"hasAutoIncrement": true,
					"isNullable": false,
					"isPrimary": true,
					"name": "id",
					"roles": [],
					"scopes": [],
					"type": "BIGSERIAL"
				},
				{
					"default": "now()",
					"isNullable": false,
					"name": "createdOn",
					"roles": [],
					"scopes": [],
					"type": "DATETIME"
				},
				{
					"default": "now()",
					"isNullable": false,
					"name": "modifiedOn",
					"roles": [],
					"scopes": [],
					"type": "DATETIME"
				},
				{
					"isNullable": false,
					"length": 150,
					"name": "firstName",
					"roles": [],
					"scopes": [],
					"type": "VARCHAR"
				},
				{
					"isNullable": false,
					"length": 150,
					"name": "lastName",
					"roles": [],
					"scopes": [],
					"type": "VARCHAR"
				},
				{ "isNullable": false, "length": 255, "name": "email", "roles": [], "scopes": [], "type": "VARCHAR" },
				{
					"isNullable": false,
					"name": "role",
					"roles": [],
					"scopes": [],
					"type": "ENUM",
					"value": "'ADMIN','USER'"
				}
			],
			"foreignKeys": [],
			"indexes": [
				{
					"columns": ["email"],
					"isPrimaryKey": false,
					"isUnique": true,
					"name": "user_email_unique_index",
					"order": "ASC"
				}
			],
			"name": "user",
			"roles": [],
			"scopes": []
		}
	],
	"endpoints": [
		{
			"baseUrl": "/api/v1",
			"description": "V1 Endpoints",
			"name": "V1",
			"routes": [
				{
					"assignments": [],
					"description": "Gets all users",
					"joins": [],
					"method": "GET",
					"name": "Get Users",
					"path": "/user/list",
					"request": [],
					"response": [
						{ "name": "id", "selector": "user.id" },
						{ "name": "createdOn", "selector": "user.createdOn" },
						{ "name": "modifiedOn", "selector": "user.modifiedOn" },
						{ "name": "firstName", "selector": "user.firstName" },
						{ "name": "lastName", "selector": "user.lastName" },
						{ "name": "email", "selector": "user.email" },
						{ "name": "role", "selector": "user.role" }
					],
					"roles": ["user", "admin"],
					"scopes": [],
					"table": "user",
					"type": "ARRAY",
					"where": []
				}
			]
		}
	],
	"globalParams": ["userId"],
	"roles": ["anonymous", "user", "admin"],
	"scopes": ["read:user", "write:user", "read:admin", "write:admin"]
}
`;

<Code code={resturaSchemaCode} lang="json" title="restura.schema.json"/>

## Run the Restura Engine

Create a script for running your application by adding the following to your `package.json` file:

export const packageJsonTypescriptCode = `
{
  "scripts": {
    "start": "node server.ts"
  }
}
`;

export const packageJsonJavascriptCode = `
{
  "scripts": {
    "start": "node server.js"
  }
}
`;

<Tabs>
  <TabItem label="TypeScript">
    <Code code={packageJsonTypescriptCode} lang="json" title="package.json"/>
  </TabItem>
  <TabItem label="JavaScript">
    <Code code={packageJsonJavascriptCode} lang="json" title="package.json"/>
  </TabItem>
</Tabs>

Now that you have installed and added the required files, you can run the Restura Engine by starting your application.

<Tabs>
  <TabItem label="npm">
    <Code code="npm start" lang="bash"/>
  </TabItem>
  <TabItem label="pnpm">
    <Code code="pnpm start" lang="bash"/>
  </TabItem>
  <TabItem label="yarn">
    <Code code="yarn start" lang="bash"/>
  </TabItem>
  <TabItem label="bun">
    <Code code="bun start" lang="bash"/>
  </TabItem>
</Tabs>

When the Engine is runs, it will generate a `src/@types` folder with the following files:
- `api.d.ts` - generated API endpoints types
- `model.d.ts`- generated Restura database table types
- `restura.d.ts` - generated types used by Restura

## Test The Endpoint

The `restura.schema.json` file has a `/user/list` endpoint that will return a list of users.

Test this endpoint by running the following command in your terminal:

export const queryEndpointsCode = `
curl -X GET http://localhost:3001/api/v1/user/list
`;

<Code code={queryEndpointsCode} lang="bash"/>

## Run the Restura UI

There currently is not a standalone application binary for the Restura UI. You will need to clone the repository and then run the UI from the terminal.

Start by cloning the repository:

export const resturaCloneSSHCode = `
https://github.com/redsky-engineering/restura.git
`;

export const resturaCloneHTTPSCode = `
git@github.com:redsky-engineering/restura.git
`;

<Tabs>
  <TabItem label="HTTPS">
    <Code code={resturaCloneHTTPSCode} lang="bash"/>
  </TabItem>
  <TabItem label="SSH">
    <Code code={resturaCloneSSHCode} lang="bash"/>
  </TabItem>
</Tabs>

Navigate to the `restura-ui` directory and run the following command to start the Restura UI:


export const resturaUiNpmCode = `cd apps/restura-ui
npm install
npm run start`;

export const resturaUiPnpmCode = `cd apps/restura-ui
pnpm install
pnpm run start`;

export const resturaUiYarnCode = `cd apps/restura-ui
yarn install
yarn start`;

export const resturaUiBunCode = `cd apps/restura-ui
bun install
bun run start`;

<Tabs>
  <TabItem label="npm">
    <Code code={resturaUiNpmCode} lang="bash"/>
  </TabItem>
  <TabItem label="pnpm">
    <Code code={resturaUiPnpmCode} lang="bash"/>
  </TabItem>
  <TabItem label="yarn">
    <Code code={resturaUiYarnCode} lang="bash"/>
  </TabItem>
  <TabItem label="bun">
    <Code code={resturaUiBunCode} lang="bash"/>
  </TabItem>
</Tabs>

With the Restura UI running, you can now access the Restura UI at <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">http://localhost:3000</a> in the browser of your choice.

When you first open the Restura UI, you will be prompted to enter an auth token. Enter in the auth token and click the "SIGN IN" button.

<Aside type="caution">
The auth token you enter must match the auth token set in the `restura.config.mjs` file.
</Aside>

<Aside type="caution">
The Restura UI connects to the Restura Engine on port 3001 by default. If you cannot login, make sure the Restura Engine is running and accessible at this port.
</Aside>

## Explore the Restura UI

When you first login, you will be navigated to the "Database" tab. Here you can view the database tables that are managed by Restura.

To view endpoints, click on the "Endpoints" tab. Here you can view the endpoints that are managed by Restura.

Changes made to the database tables or endpoints update the `restura.schema.json` file and the Restura Engine will automatically restart to apply the changes.

## Next steps
- Add a database table
- Create a standard endpoint
- Create a custom endpoint
- Add an authentication handler with roles
- Add an authentication handler with scopes